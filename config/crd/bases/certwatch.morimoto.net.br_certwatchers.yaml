
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.4.1
  creationTimestamp: null
  name: certwatchers.certwatch.morimoto.net.br
spec:
  group: certwatch.morimoto.net.br
  names:
    kind: CertWatcher
    listKind: CertWatcherList
    plural: certwatchers
    singular: certwatcher
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - jsonPath: .spec.secret.namespace
      name: SECRET_NS
      type: string
    - jsonPath: .spec.secret.name
      name: SECRET_NAME
      type: string
    - jsonPath: .status.status
      name: STATUS
      type: string
    - jsonPath: .status.actionStatus
      name: ACTION_STATUS
      type: string
    - jsonPath: .status.lastUpdate
      name: LAST_UPDATE
      type: string
    - jsonPath: .status.lastChecksum
      name: LAST_CHECKSUM
      type: string
    - jsonPath: .status.message
      name: MESSAGE
      type: string
    name: v1
    schema:
      openAPIV3Schema:
        description: CertWatcher is the Schema for the certwatchers API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: CertWatcherSpec defines the desired state of CertWatcher
            properties:
              actions:
                description: Actions that should be performed when the watched Secret
                  changes.
                properties:
                  echo:
                    description: Dummy action used for testing and debugging.
                    properties:
                      enabled:
                        description: Indicates whether this action is enabled. Defaults
                          to false.
                        type: boolean
                    type: object
                  email:
                    description: React to Secret change by sending e-mails.
                    properties:
                      attachments:
                        description: List of attachments to send with the email. Paths
                          are relative to a temporary workspace directory where different
                          versions of the certificate files are saved before sending
                          the email. Files will be available in popular formats, like
                          PEM and PKCS#12, zipped and unzipped.
                        items:
                          type: string
                        type: array
                      bcc:
                        description: BCC header to use in the email.
                        type: string
                      bodyContentType:
                        description: 'Email body content type: text/plain or text/html'
                        type: string
                      bodyTemplate:
                        description: Template file used to generate the email body
                          contents.
                        type: string
                      cc:
                        description: CC  header to use in the email.
                        type: string
                      configFile:
                        description: Configuration file with information about the
                          email server to use
                        type: string
                      enabled:
                        description: Indicates whether this action is enabled. Defaults
                          to false.
                        type: boolean
                      from:
                        description: FROM header to use in the email. If not specified,
                          the value must be specified in configuration file.
                        type: string
                      subject:
                        description: SUBJECT header to use in the email.
                        type: string
                      to:
                        description: TO header to use in the email. A comma separated
                          list of email addresses.
                        type: string
                    required:
                    - to
                    type: object
                type: object
              filenamesPrefix:
                description: Filename prefix that should be used in the exported certificate
                  files. If empty, defaults to "tls", so files will be created in
                  the temporary workspace directory as tls.key, tls.crt, tls.p12,
                  etc...
                type: string
              pkcs12Password:
                description: Password that should be used in the PKCS#12 envelope.
                  If empty, p12 certificate files will not be protected by any password.
                type: string
              secret:
                description: Secret watched by CertWatcher
                properties:
                  name:
                    description: Name of the Secret watched by CertWatcher
                    type: string
                  namespace:
                    description: Namespace of the Secret watched by CertWatcher.
                    type: string
                required:
                - name
                - namespace
                type: object
              zipFilesPassword:
                description: Password that should be used to zip certificate files.
                  Zipped versions of each certificates are kept along with the raw
                  files. If this values is empty, zip files will no tbe protected
                  with any password.
                type: string
            required:
            - secret
            type: object
          status:
            description: CertWatcherStatus defines the observed state of CertWatcher
            properties:
              actionStatus:
                type: string
              lastChecksum:
                type: string
              lastUpdate:
                format: date-time
                type: string
              message:
                type: string
              status:
                type: string
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
status:
  acceptedNames:
    kind: ""
    plural: ""
  conditions: []
  storedVersions: []
